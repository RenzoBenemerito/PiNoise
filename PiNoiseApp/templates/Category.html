{% extends "header.html" %}
{% block content %}
<br>
<div class="container-fluid pane">
<h1 id="category">{{problem}}</h1>
<h3>Have an idea?</h3>
<form action='addPost' method="POST" id="post">
    {% csrf_token %}
    <label for="title">Title</label>
    <br>
    <input type="text" name='title'>
    <br>
    <textarea name="ideation" id="ideation"></textarea>
    <div class="bCont">
        <button class="btn btn-primary" type='submit'>Add Idea</button>
    </div>
</form>

{% for post in posts %}
<div class="post">
    <div class="vote">
        {% if votes %}
        {% for vote in votes %}
        {% if vote.user.id == userLog and post.id == vote.post.id %}
        {% if vote.vote == 'upvote' %}
        <span class="glyphicon glyphicon-thumbs-up up" aria-hidden="true" id='upvote' style='color:blue'></span>
        <h4>{{post.rating}}</h4>
        <span class="glyphicon glyphicon-thumbs-down down" aria-hidden="true" id='downvote'></span>
        {% elif vote.vote == 'downvote' %}
        <span class="glyphicon glyphicon-thumbs-up up" aria-hidden="true" id='upvote'></span>
        <h4>{{post.rating}}</h4>
        <span class="glyphicon glyphicon-thumbs-down down" aria-hidden="true" id='downvote' style='color:red'></span>
        {% endif %}
        {% elif vote.user.id == userLog and post.id != vote.post.id %}
        <span class="glyphicon glyphicon-thumbs-up up" aria-hidden="true" id='upvote'></span>
        <h4>{{post.rating}}</h4>
        <span class="glyphicon glyphicon-thumbs-down down" aria-hidden="true" id='downvote'></span>
        {% endif %}
        {% endfor %}
        {% else %}
        <span class="glyphicon glyphicon-thumbs-up up" aria-hidden="true" id='upvote'></span>
        <h4>{{post.rating}}</h4>
        <span class="glyphicon glyphicon-thumbs-down down" aria-hidden="true" id='downvote'></span>
        {% endif %}
    </div>
    <a href="{{post.author}}/{{post.title}}/post_page">
        <div class="ideaPane">
            <h2>{{post.title}}</h2>
            <h6 class='by'>by </h6><h4 class='auth'>{{post.author}}</h4>
            <hr>
            <p><span>{{post.description}}</span></p>
        </div>    
    </a>
           
</div>
{% endfor %}
{% endblock %}
